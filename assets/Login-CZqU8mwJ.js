import{c as C,u as S,r as n,j as e,H as L,B as m}from"./index-jfWgHFUc.js";import{I as h}from"./input-BHQuoABz.js";import{A as N,a as w,L as x,E}from"./alert-D4OvRpVA.js";import{C as D,a as I,b as A,c as F,d as q}from"./card-DRUBZc3U.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],M=C("eye-off",H),O=()=>{const{login:y,register:b}=S(),[a,u]=n.useState(!0),[i,v]=n.useState(!1),[p,j]=n.useState(!1),[f,r]=n.useState(""),[g,l]=n.useState(""),[s,o]=n.useState({username:"",email:"",password:""}),d=c=>{o({...s,[c.target.name]:c.target.value}),r(""),l("")},k=async c=>{c.preventDefault(),j(!0),r(""),l("");try{if(a){const t=await y({username:s.username,password:s.password});t.success?navigate("/dashboard"):r(t.error)}else{const t=await b({username:s.username,email:s.email,password:s.password});t.success?(l("登録が完了しました。ログインしてください。"),u(!0),o({username:"",email:"",password:""})):r(t.error)}}catch{r("予期しないエラーが発生しました。")}finally{j(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(L,{className:"h-12 w-12 text-pink-500"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"恋愛コンサル"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"会員専用サイト"})]}),e.jsxs(D,{className:"shadow-lg",children:[e.jsxs(I,{className:"space-y-1",children:[e.jsx(A,{className:"text-2xl text-center",children:a?"ログイン":"新規登録"}),e.jsx(F,{className:"text-center",children:a?"アカウントにログインしてください":"新しいアカウントを作成してください"})]}),e.jsxs(q,{children:[f&&e.jsx(N,{className:"mb-4 border-red-200 bg-red-50",children:e.jsx(w,{className:"text-red-700",children:f})}),g&&e.jsx(N,{className:"mb-4 border-green-200 bg-green-50",children:e.jsx(w,{className:"text-green-700",children:g})}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"username",children:"ユーザー名"}),e.jsx(h,{id:"username",name:"username",type:"text",value:s.username,onChange:d,required:!0,placeholder:"ユーザー名を入力"})]}),!a&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"email",children:"メールアドレス"}),e.jsx(h,{id:"email",name:"email",type:"email",value:s.email,onChange:d,required:!0,placeholder:"メールアドレスを入力"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"password",children:"パスワード"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"password",name:"password",type:i?"text":"password",value:s.password,onChange:d,required:!0,placeholder:"パスワードを入力"}),e.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>v(!i),children:i?e.jsx(M,{className:"h-4 w-4"}):e.jsx(E,{className:"h-4 w-4"})})]})]}),e.jsx(m,{type:"submit",className:"w-full bg-pink-600 hover:bg-pink-700",disabled:p,children:p?"処理中...":a?"ログイン":"登録"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(m,{variant:"link",onClick:()=>{u(!a),r(""),l(""),o({username:"",email:"",password:""})},className:"text-pink-600 hover:text-pink-700",children:a?"アカウントをお持ちでない方はこちら":"既にアカウントをお持ちの方はこちら"})})]})]})]})})};export{O as default};
