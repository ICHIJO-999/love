import{c as C,r as n,j as e,a as L,b as y,d as E,u as M,H as P,B as v}from"./index-V6RVz_p_.js";import{I as j}from"./input-SK1boFwQ.js";import{C as _,a as I,b as A,c as F,d as R}from"./card-D6Rt5qdk.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],q=C("eye-off",$);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],H=C("eye",z);var B=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],O=B.reduce((a,t)=>{const s=L(`Primitive.${t}`),i=n.forwardRef((l,h)=>{const{asChild:o,...m}=l,u=o?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...m,ref:h})});return i.displayName=`Primitive.${t}`,{...a,[t]:i}},{}),V="Label",S=n.forwardRef((a,t)=>e.jsx(O.label,{...a,ref:t,onMouseDown:s=>{var l;s.target.closest("button, input, select, textarea")||((l=a.onMouseDown)==null||l.call(a,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));S.displayName=V;var T=S;function b({className:a,...t}){return e.jsx(T,{"data-slot":"label",className:y("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...t})}const G=E("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function N({className:a,variant:t,...s}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:y(G({variant:t}),a),...s})}function k({className:a,...t}){return e.jsx("div",{"data-slot":"alert-description",className:y("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...t})}const U=()=>{const{login:a,register:t}=M(),[s,i]=n.useState(!0),[l,h]=n.useState(!1),[o,m]=n.useState(!1),[u,c]=n.useState(""),[w,x]=n.useState(""),[r,g]=n.useState({username:"",email:"",password:""}),f=p=>{g({...r,[p.target.name]:p.target.value}),c(""),x("")},D=async p=>{p.preventDefault(),m(!0),c(""),x("");try{if(s){const d=await a({username:r.username,password:r.password});d.success?navigate("/dashboard"):c(d.error)}else{const d=await t({username:r.username,email:r.email,password:r.password});d.success?(x("登録が完了しました。ログインしてください。"),i(!0),g({username:"",email:"",password:""})):c(d.error)}}catch{c("予期しないエラーが発生しました。")}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(P,{className:"h-12 w-12 text-pink-500"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"恋愛コンサル"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"会員専用サイト"})]}),e.jsxs(_,{className:"shadow-lg",children:[e.jsxs(I,{className:"space-y-1",children:[e.jsx(A,{className:"text-2xl text-center",children:s?"ログイン":"新規登録"}),e.jsx(F,{className:"text-center",children:s?"アカウントにログインしてください":"新しいアカウントを作成してください"})]}),e.jsxs(R,{children:[u&&e.jsx(N,{className:"mb-4 border-red-200 bg-red-50",children:e.jsx(k,{className:"text-red-700",children:u})}),w&&e.jsx(N,{className:"mb-4 border-green-200 bg-green-50",children:e.jsx(k,{className:"text-green-700",children:w})}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"username",children:"ユーザー名"}),e.jsx(j,{id:"username",name:"username",type:"text",value:r.username,onChange:f,required:!0,placeholder:"ユーザー名を入力"})]}),!s&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"email",children:"メールアドレス"}),e.jsx(j,{id:"email",name:"email",type:"email",value:r.email,onChange:f,required:!0,placeholder:"メールアドレスを入力"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"password",children:"パスワード"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{id:"password",name:"password",type:l?"text":"password",value:r.password,onChange:f,required:!0,placeholder:"パスワードを入力"}),e.jsx(v,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!l),children:l?e.jsx(q,{className:"h-4 w-4"}):e.jsx(H,{className:"h-4 w-4"})})]})]}),e.jsx(v,{type:"submit",className:"w-full bg-pink-600 hover:bg-pink-700",disabled:o,children:o?"処理中...":s?"ログイン":"登録"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(v,{variant:"link",onClick:()=>{i(!s),c(""),x(""),g({username:"",email:"",password:""})},className:"text-pink-600 hover:text-pink-700",children:s?"アカウントをお持ちでない方はこちら":"既にアカウントをお持ちの方はこちら"})})]})]})]})})};export{U as default};
