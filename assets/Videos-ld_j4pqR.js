import{r as l,f as N,j as e,B}from"./index-DwW_GgWS.js";import{C as i,a as f,b as u,d,c as D}from"./card-CCFnjn6m.js";import{I as E}from"./input-DdpbhRN0.js";import{C as y,B as c,T as w,S as P}from"./badge-Cq1N7HC3.js";import{P as x}from"./play-B_H2vmS-.js";const J=()=>{const[m,b]=l.useState([]),[o,h]=l.useState([]),[t,j]=l.useState(null),[r,v]=l.useState(""),[C,V]=l.useState(!0);l.useEffect(()=>{L()},[]),l.useEffect(()=>{S()},[m,r]);const L=async()=>{try{const s=await N.getVideos();b(s.data.videos||[])}catch(s){console.error("動画の読み込みエラー:",s)}finally{V(!1)}},S=()=>{if(!r)h(m);else{const s=m.filter(a=>{var n,p;return a.title.toLowerCase().includes(r.toLowerCase())||((n=a.description)==null?void 0:n.toLowerCase().includes(r.toLowerCase()))||((p=a.category)==null?void 0:p.toLowerCase().includes(r.toLowerCase()))||a.tags.some(k=>k.toLowerCase().includes(r.toLowerCase()))});h(s)}},T=async s=>{try{const a=await N.getVideo(s.id);j(a.data.video)}catch(a){console.error("動画の詳細読み込みエラー:",a)}},g=s=>new Date(s).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"});return C?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"動画を読み込み中..."})]})}):t?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx(B,{variant:"outline",onClick:()=>j(null),className:"mb-4",children:"← 動画一覧に戻る"})}),e.jsxs(i,{children:[e.jsxs(f,{children:[e.jsx(u,{className:"text-2xl",children:t.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{children:g(t.created_at)})]}),t.category&&e.jsx(c,{variant:"secondary",children:t.category})]}),t.tags.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{className:"h-4 w-4 text-gray-400"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map((s,a)=>e.jsx(c,{variant:"outline",className:"text-xs",children:s},a))})]})]}),e.jsxs(d,{children:[e.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg flex items-center justify-center mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(x,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-500",children:["動画: ",t.filename]}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"実際の実装では、ここに動画プレイヤーが表示されます"})]})}),t.description&&e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"動画について"}),t.description.split(`
`).map((s,a)=>e.jsx("p",{className:"mb-4 leading-relaxed",children:s},a))]})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"動画"}),e.jsx("p",{className:"text-gray-600",children:"動画コンテンツで実践的なスキルを学びましょう"})]}),e.jsx(i,{children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(E,{placeholder:"動画を検索...",value:r,onChange:s=>v(s.target.value),className:"pl-10"})]})})}),o.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(s=>e.jsxs(i,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>T(s),children:[e.jsxs(f,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(x,{className:"h-5 w-5 text-red-500 mt-1"}),s.category&&e.jsx(c,{variant:"secondary",className:"text-xs",children:s.category})]}),e.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg flex items-center justify-center mb-3",children:e.jsx(x,{className:"h-8 w-8 text-gray-400"})}),e.jsx(u,{className:"text-lg line-clamp-2",children:s.title}),e.jsx(D,{className:"line-clamp-3",children:s.description?s.description.substring(0,150)+"...":"動画の説明はありません"})]}),e.jsxs(d,{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{children:g(s.created_at)})]}),s.tags.length>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:s.tags.length})]})]}),s.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.tags.slice(0,3).map((a,n)=>e.jsx(c,{variant:"outline",className:"text-xs",children:a},n)),s.tags.length>3&&e.jsxs(c,{variant:"outline",className:"text-xs",children:["+",s.tags.length-3]})]})]})]},s.id))}):e.jsx(i,{children:e.jsxs(d,{className:"text-center py-12",children:[e.jsx(x,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r?"検索結果が見つかりません":"動画がありません"}),e.jsx("p",{className:"text-gray-500",children:r?"別のキーワードで検索してみてください":"まだ動画が投稿されていません"})]})})]})};export{J as default};
